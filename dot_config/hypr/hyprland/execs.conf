# Bar, wallpaper
# NOTE: If Hyprland crashes on login, comment out lines below one by one to find the culprit

# Start hyprpaper first as fallback wallpaper
# If hyprpaper is not installed, install it: sudo pacman -S hyprpaper
exec-once = hyprpaper

# Start quickshell (bar, widgets, etc.)
# If qs is not found, install: yay -S quickshell
exec-once = qs -c $qsConfig || echo "quickshell failed to start" >> /tmp/hypr-errors.log

# Core components
exec-once = gnome-keyring-daemon --start --components=secrets || true
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 || /usr/lib/polkit-kde-authentication-agent-1 || true
exec-once = dunst || true
exec-once = hypridle || true
exec-once = dbus-update-activation-environment --all || true

# Audio
exec-once = easyeffects --hide-window --service-mode || true

# Clipboard: history
exec-once = wl-paste --type text --watch cliphist store || true
exec-once = wl-paste --type image --watch cliphist store || true

# Cursor (skip if not installed)
exec-once = hyprctl setcursor Bibata-Modern-Classic 24 || true

# Fix dock pinned apps not launching properly (https://github.com/end-4/dots-hyprland/issues/2200)
# This causes https://github.com/end-4/dots-hyprland/issues/2427
# exec-once = sleep 3.5 && hyprctl reload && sleep 0.5 && touch ~/.config/quickshell/ii/shell.qml
